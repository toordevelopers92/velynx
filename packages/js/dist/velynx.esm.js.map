{"version":3,"file":"velynx.esm.js","sources":["../src/modules/helpers.ts","../src/modules/modal.ts","../src/modules/drawer.ts","../src/modules/dropdown.ts","../src/modules/tooltip.ts","../src/modules/tabs.ts","../src/modules/toast.ts","../src/modules/accordion.ts","../src/modules/popover.ts","../src/modules/navbar.ts","../src/modules/calendar.ts","../src/modules/particle-progress.ts","../src/modules/image-reveal.ts","../src/index.ts"],"sourcesContent":["export const byId = (id: string) => document.getElementById(id);\n\nexport const toggleClass = (el: Element, className: string, on: boolean) => {\n  if (on) {\n    el.classList.add(className);\n  } else {\n    el.classList.remove(className);\n  }\n};\n\nexport const setAriaExpanded = (el: Element | null, expanded: boolean) => {\n  if (el && 'setAttribute' in el) {\n    el.setAttribute('aria-expanded', expanded ? 'true' : 'false');\n  }\n};\n\nexport const setAriaHidden = (el: Element | null, hidden: boolean) => {\n  if (el && 'setAttribute' in el) {\n    el.setAttribute('aria-hidden', hidden ? 'true' : 'false');\n  }\n};\r\n\r\n","import { setAriaExpanded, setAriaHidden, toggleClass } from './helpers';\n\nconst modalAngles = [\n  'center',\n  'top',\n  'right',\n  'bottom',\n  'left',\n  'top-left',\n  'top-right',\n  'bottom-left',\n  'bottom-right'\n] as const;\n\ntype ModalAngle = (typeof modalAngles)[number];\n\nexport class Modal {\n  private root: HTMLElement;\n  private closeOnEscape: boolean;\n  private closeOnBackdrop: boolean;\n\n  constructor(root: HTMLElement) {\n    this.root = root;\n    this.closeOnEscape = this.root.dataset.vxEscapeClose !== 'false';\n    this.closeOnBackdrop = this.root.dataset.vxBackdropClose !== 'false';\n    this.root.setAttribute('role', 'dialog');\n    this.root.setAttribute('aria-modal', 'true');\n    this.root.dataset.vxState = 'closed';\n    this.setAngle();\n    this.bind();\n    setAriaHidden(this.root, true);\n  }\n\n  open() {\n    this.setAngle();\n    this.root.dataset.vxState = 'open';\n    toggleClass(this.root, 'vxs-open', true);\n    setAriaHidden(this.root, false);\n  }\n\n  close() {\n    this.root.dataset.vxState = 'closed';\n    toggleClass(this.root, 'vxs-open', false);\n    setAriaHidden(this.root, true);\n  }\n\n  private setAngle() {\n    const configured = this.root.dataset.vxAngle || 'center';\n    if (configured === 'random') {\n      const index = Math.floor(Math.random() * modalAngles.length);\n      this.root.dataset.vxAngleActive = modalAngles[index];\n      return;\n    }\n    this.root.dataset.vxAngleActive = modalAngles.includes(configured as ModalAngle)\n      ? configured\n      : 'center';\n  }\n\n  private bind() {\n    this.root.addEventListener('click', (event) => {\n      if (!this.closeOnBackdrop) {\n        return;\n      }\n      if (event.target === this.root) {\n        this.close();\n      }\n    });\n\n    document.addEventListener('keydown', (event) => {\n      if (!this.closeOnEscape || event.key !== 'Escape') {\n        return;\n      }\n      if (this.root.classList.contains('vxs-open')) {\n        this.close();\n      }\n    });\n  }\n\n  static wire() {\n    document.querySelectorAll<HTMLElement>('[data-vx=\"modal\"]').forEach((modalEl) => {\n      const modal = new Modal(modalEl);\n      const id = modalEl.id;\n      if (!id) {\n        return;\n      }\n      document.querySelectorAll<HTMLElement>(`[data-vx-open=\"${id}\"]`).forEach((btn) => {\n        btn.addEventListener('click', () => {\n          modal.open();\n          setAriaExpanded(btn, true);\n        });\n      });\n      document.querySelectorAll<HTMLElement>(`[data-vx-close=\"${id}\"]`).forEach((btn) => {\n        btn.addEventListener('click', () => {\n          modal.close();\n          setAriaExpanded(btn, false);\n        });\n      });\n    });\n  }\n}\r\n\r\n","import { setAriaExpanded, setAriaHidden, toggleClass } from './helpers';\n\nexport class Drawer {\n  private root: HTMLElement;\n\n  constructor(root: HTMLElement) {\n    this.root = root;\n    setAriaHidden(this.root, true);\n  }\n\n  open() {\n    toggleClass(this.root, 'vxs-open', true);\n    setAriaHidden(this.root, false);\n  }\n\n  close() {\n    toggleClass(this.root, 'vxs-open', false);\n    setAriaHidden(this.root, true);\n  }\n\n  static wire() {\n    document.querySelectorAll<HTMLElement>('[data-vx=\"drawer\"]').forEach((drawerEl) => {\n      const drawer = new Drawer(drawerEl);\n      const id = drawerEl.id;\n      if (!id) {\n        return;\n      }\n      document.querySelectorAll<HTMLElement>(`[data-vx-open=\"${id}\"]`).forEach((btn) => {\n        btn.addEventListener('click', () => {\n          drawer.open();\n          setAriaExpanded(btn, true);\n        });\n      });\n      document.querySelectorAll<HTMLElement>(`[data-vx-close=\"${id}\"]`).forEach((btn) => {\n        btn.addEventListener('click', () => {\n          drawer.close();\n          setAriaExpanded(btn, false);\n        });\n      });\n    });\n  }\n}\r\n\r\n","import { setAriaExpanded, toggleClass } from './helpers';\n\nexport class Dropdown {\n  private root: HTMLElement;\n  private toggle: HTMLElement | null;\n  private menu: HTMLElement | null;\n\n  constructor(root: HTMLElement) {\n    this.root = root;\n    this.toggle = root.querySelector<HTMLElement>('[data-vx-toggle]');\n    this.menu = root.querySelector<HTMLElement>('[data-vx-menu]');\n    this.toggle?.setAttribute('aria-haspopup', 'menu');\n    setAriaExpanded(this.toggle, false);\n  }\n\n  open() {\n    if (!this.menu || !this.toggle) return;\n    toggleClass(this.menu, 'vxs-open', true);\n    setAriaExpanded(this.toggle, true);\n  }\n\n  close() {\n    if (!this.menu || !this.toggle) return;\n    toggleClass(this.menu, 'vxs-open', false);\n    setAriaExpanded(this.toggle, false);\n  }\n\n  static wire() {\n    document.querySelectorAll<HTMLElement>('[data-vx=\"dropdown\"]').forEach((root) => {\n      const dropdown = new Dropdown(root);\n      dropdown.toggle?.addEventListener('click', () => {\n        dropdown.menu?.classList.contains('vxs-open') ? dropdown.close() : dropdown.open();\n      });\n      document.addEventListener('click', (event) => {\n        if (!root.contains(event.target as Node)) {\n          dropdown.close();\n        }\n      });\n    });\n  }\n}\r\n\r\n","export class Tooltip {\n  static wire() {\n    const triggers = document.querySelectorAll<HTMLElement>('[data-vx-tooltip]');\n    triggers.forEach((trigger) => {\n      let tipEl: HTMLDivElement | null = null;\n      const text = trigger.getAttribute('data-vx-tooltip') || '';\n\n      const show = () => {\n        if (!text) return;\n        tipEl = document.createElement('div');\n        tipEl.className = 'vxc-tooltip vxm-fade-1';\n        tipEl.textContent = text;\n        document.body.appendChild(tipEl);\n        const rect = trigger.getBoundingClientRect();\n        tipEl.style.position = 'fixed';\n        tipEl.style.top = `${rect.bottom + 8}px`;\n        tipEl.style.left = `${rect.left}px`;\n      };\n\n      const hide = () => {\n        if (tipEl) {\n          tipEl.remove();\n          tipEl = null;\n        }\n      };\n\n      trigger.addEventListener('mouseenter', show);\n      trigger.addEventListener('focus', show);\n      trigger.addEventListener('mouseleave', hide);\n      trigger.addEventListener('blur', hide);\n    });\n  }\n}\r\n\r\n","import { setAriaExpanded, setAriaHidden, toggleClass } from './helpers';\n\nexport class Tabs {\n  private root: HTMLElement;\n\n  constructor(root: HTMLElement) {\n    this.root = root;\n  }\n\n  activate(id: string) {\n    this.root.querySelectorAll<HTMLElement>('[data-vx-tab]').forEach((tab) => {\n      const isActive = tab.getAttribute('data-vx-tab') === id;\n      toggleClass(tab, 'vxs-active', isActive);\n      setAriaExpanded(tab, isActive);\n    });\n    this.root.querySelectorAll<HTMLElement>('[data-vx-panel]').forEach((panel) => {\n      const isActive = panel.getAttribute('data-vx-panel') === id;\n      toggleClass(panel, 'vxs-hidden', !isActive);\n      setAriaHidden(panel, !isActive);\n    });\n  }\n\n  static wire() {\n    document.querySelectorAll<HTMLElement>('[data-vx=\"tabs\"]').forEach((root) => {\n      const tabs = new Tabs(root);\n      const first = root.querySelector<HTMLElement>('[data-vx-tab]');\n      if (first) {\n        tabs.activate(first.getAttribute('data-vx-tab') || '');\n      }\n      root.querySelectorAll<HTMLElement>('[data-vx-tab]').forEach((tab) => {\n        tab.setAttribute('role', 'tab');\n        tab.addEventListener('click', () => {\n          const id = tab.getAttribute('data-vx-tab') || '';\n          tabs.activate(id);\n        });\n      });\n      root.querySelectorAll<HTMLElement>('[data-vx-panel]').forEach((panel) => {\n        panel.setAttribute('role', 'tabpanel');\n      });\n    });\n  }\n}\r\n\r\n","export class ToastStack {\n  private root: HTMLElement;\n\n  constructor(root: HTMLElement) {\n    this.root = root;\n  }\n\n  show(message: string, timeout = 3200) {\n    const toast = document.createElement('div');\n    toast.className = 'vxc-toast vxm-fade-1';\n    toast.textContent = message;\n    this.root.appendChild(toast);\n    window.setTimeout(() => {\n      toast.remove();\n    }, timeout);\n  }\n\n  static wire() {\n    document.querySelectorAll<HTMLElement>('[data-vx=\"toast-stack\"]').forEach((stackEl) => {\n      const stack = new ToastStack(stackEl);\n      const id = stackEl.id;\n      if (!id) return;\n      document.querySelectorAll<HTMLElement>(`[data-vx-toast=\"${id}\"]`).forEach((btn) => {\n        btn.addEventListener('click', () => {\n          const msg = btn.getAttribute('data-vx-toast-msg') || 'Signal sent.';\n          stack.show(msg);\n        });\n      });\n    });\n  }\n}\r\n\r\n","import { setAriaExpanded, setAriaHidden, toggleClass } from './helpers';\n\nexport class Accordion {\n  private root: HTMLElement;\n\n  constructor(root: HTMLElement) {\n    this.root = root;\n  }\n\n  toggle(panelId: string) {\n    this.root.querySelectorAll<HTMLElement>('[data-vx-panel]').forEach((panel) => {\n      const isActive = panel.getAttribute('data-vx-panel') === panelId;\n      toggleClass(panel, 'vxs-hidden', !isActive);\n      setAriaHidden(panel, !isActive);\n    });\n    this.root.querySelectorAll<HTMLElement>('[data-vx-trigger]').forEach((trigger) => {\n      const isActive = trigger.getAttribute('data-vx-trigger') === panelId;\n      setAriaExpanded(trigger, isActive);\n    });\n  }\n\n  static wire() {\n    document.querySelectorAll<HTMLElement>('[data-vx=\"accordion\"]').forEach((root) => {\n      const accordion = new Accordion(root);\n      root.querySelectorAll<HTMLElement>('[data-vx-panel]').forEach((panel) => {\n        toggleClass(panel, 'vxs-hidden', true);\n        setAriaHidden(panel, true);\n      });\n      root.querySelectorAll<HTMLElement>('[data-vx-trigger]').forEach((trigger) => {\n        trigger.addEventListener('click', () => {\n          const id = trigger.getAttribute('data-vx-trigger') || '';\n          accordion.toggle(id);\n        });\n      });\n    });\n  }\n}\r\n\r\n","import { toggleClass } from './helpers';\n\nexport class Popover {\n  private trigger: HTMLElement;\n  private panel: HTMLElement | null;\n\n  constructor(trigger: HTMLElement) {\n    this.trigger = trigger;\n    const id = trigger.getAttribute('data-vx-popover') || '';\n    this.panel = id ? document.getElementById(id) : null;\n    this.trigger.setAttribute('aria-haspopup', 'dialog');\n  }\n\n  open() {\n    if (!this.panel) return;\n    toggleClass(this.panel, 'vxs-hidden', false);\n  }\n\n  close() {\n    if (!this.panel) return;\n    toggleClass(this.panel, 'vxs-hidden', true);\n  }\n\n  static wire() {\n    document.querySelectorAll<HTMLElement>('[data-vx-popover]').forEach((trigger) => {\n      const popover = new Popover(trigger);\n      popover.close();\n      trigger.addEventListener('click', () => {\n        popover.panel?.classList.contains('vxs-hidden') ? popover.open() : popover.close();\n      });\n      document.addEventListener('click', (event) => {\n        if (!trigger.contains(event.target as Node) && !popover.panel?.contains(event.target as Node)) {\n          popover.close();\n        }\n      });\n    });\n  }\n}\r\n\r\n","import { setAriaExpanded, setAriaHidden, toggleClass } from './helpers';\n\nexport class Navbar {\n  private root: HTMLElement;\n  private toggle: HTMLElement | null;\n  private menu: HTMLElement | null;\n\n  constructor(root: HTMLElement) {\n    this.root = root;\n    this.toggle = this.root.querySelector<HTMLElement>('[data-vx-toggle]');\n    this.menu = this.root.querySelector<HTMLElement>('[data-vx-menu]');\n\n    if (!this.toggle || !this.menu) {\n      return;\n    }\n\n    if (this.menu.id) {\n      this.toggle.setAttribute('aria-controls', this.menu.id);\n    }\n\n    const isOpen = this.menu.classList.contains('vxs-open');\n    setAriaExpanded(this.toggle, isOpen);\n    setAriaHidden(this.menu, !isOpen);\n\n    this.toggle.addEventListener('click', () => {\n      const nextOpen = !this.menu?.classList.contains('vxs-open');\n      if (nextOpen) {\n        this.open();\n      } else {\n        this.close();\n      }\n    });\n\n    this.root.addEventListener('keydown', (event) => {\n      if (event.key === 'Escape') {\n        this.close();\n      }\n    });\n\n    document.addEventListener('click', (event) => {\n      if (!this.menu || !this.menu.classList.contains('vxs-open')) {\n        return;\n      }\n      if (this.root.contains(event.target as Node)) {\n        return;\n      }\n      this.close();\n    });\n  }\n\n  open() {\n    if (!this.menu) {\n      return;\n    }\n    toggleClass(this.menu, 'vxs-open', true);\n    setAriaExpanded(this.toggle, true);\n    setAriaHidden(this.menu, false);\n  }\n\n  close() {\n    if (!this.menu) {\n      return;\n    }\n    toggleClass(this.menu, 'vxs-open', false);\n    setAriaExpanded(this.toggle, false);\n    setAriaHidden(this.menu, true);\n  }\n\n  static wire() {\n    document.querySelectorAll<HTMLElement>('[data-vx=\"navbar\"]').forEach((navEl) => {\n      new Navbar(navEl);\n    });\n  }\n}\n\r\n","type CalendarParts = {\n  header: HTMLElement;\n  title: HTMLElement;\n  prev: HTMLButtonElement;\n  next: HTMLButtonElement;\n  weekdays: HTMLElement;\n  grid: HTMLElement;\n};\n\ntype CalendarMode = 'single' | 'multi' | 'range';\n\nconst parseDate = (value?: string | null) => {\n  if (!value) {\n    return null;\n  }\n  const match = /^(\\d{4})-(\\d{2})-(\\d{2})$/.exec(value);\n  if (!match) {\n    return null;\n  }\n  const year = Number(match[1]);\n  const month = Number(match[2]) - 1;\n  const day = Number(match[3]);\n  const date = new Date(year, month, day);\n  if (Number.isNaN(date.getTime())) {\n    return null;\n  }\n  return date;\n};\n\nconst splitDateValues = (value?: string | null) =>\n  (value || '')\n    .split(/[,\\s;|]+/)\n    .map((item) => item.trim())\n    .filter(Boolean);\n\nconst compareDates = (a: Date, b: Date) => a.getTime() - b.getTime();\n\nconst toIsoDate = (date: Date) => {\n  const y = date.getFullYear();\n  const m = `${date.getMonth() + 1}`.padStart(2, '0');\n  const d = `${date.getDate()}`.padStart(2, '0');\n  return `${y}-${m}-${d}`;\n};\n\nconst addMonths = (date: Date, offset: number) =>\n  new Date(date.getFullYear(), date.getMonth() + offset, 1);\n\nconst getWeekdayLabels = (formatter: Intl.DateTimeFormat, weekStart: number) => {\n  const base = new Date(2020, 5, 7);\n  const labels = Array.from({ length: 7 }, (_, index) => {\n    const d = new Date(base);\n    d.setDate(base.getDate() + index);\n    return formatter.format(d);\n  });\n  return labels.slice(weekStart).concat(labels.slice(0, weekStart));\n};\n\nconst parseMode = (value?: string | null): CalendarMode => {\n  if (value === 'multi' || value === 'range') {\n    return value;\n  }\n  return 'single';\n};\n\nconst parseDateList = (value?: string | null) =>\n  splitDateValues(value)\n    .map((token) => parseDate(token))\n    .filter((date): date is Date => Boolean(date))\n    .sort(compareDates);\n\nconst parseRangeSelection = (value?: string | null): [Date | null, Date | null] => {\n  if (!value) {\n    return [null, null];\n  }\n  const tokens =\n    value.includes('..') || value.includes('/')\n      ? value.split(/(?:\\.\\.|\\/)/).map((item) => item.trim())\n      : splitDateValues(value);\n  const first = parseDate(tokens[0]);\n  const second = parseDate(tokens[1]);\n  if (!first && !second) {\n    return [null, null];\n  }\n  if (first && second && second < first) {\n    return [second, first];\n  }\n  return [first, second];\n};\n\nexport class Calendar {\n  private root: HTMLElement;\n  private parts: CalendarParts;\n  private mode: CalendarMode;\n  private locale: string;\n  private weekStart: number;\n  private minDate: Date | null;\n  private maxDate: Date | null;\n  private selected: Date | null;\n  private selectedDates: Set<string>;\n  private rangeStart: Date | null;\n  private rangeEnd: Date | null;\n  private viewDate: Date;\n  private today: Date;\n  private todayIso: string;\n  private monthFormatter: Intl.DateTimeFormat;\n  private weekdayFormatter: Intl.DateTimeFormat;\n  private weekdaysReady: boolean;\n\n  constructor(root: HTMLElement) {\n    this.root = root;\n    this.mode = parseMode(this.root.dataset.vxSelection || this.root.dataset.vxCalendarMode);\n    this.locale = this.root.dataset.vxLocale || 'en-US';\n    this.weekStart = Number(this.root.dataset.vxWeekStart || 0);\n    if (Number.isNaN(this.weekStart) || this.weekStart < 0 || this.weekStart > 6) {\n      this.weekStart = 0;\n    }\n    this.minDate = parseDate(this.root.dataset.vxMin);\n    this.maxDate = parseDate(this.root.dataset.vxMax);\n    this.selected = parseDate(this.root.dataset.vxSelected);\n    this.selectedDates = new Set(\n      parseDateList(this.root.dataset.vxSelectedDates || this.root.dataset.vxSelected).map((date) =>\n        toIsoDate(date)\n      )\n    );\n    const [rangeStart, rangeEnd] = parseRangeSelection(\n      `${this.root.dataset.vxRangeStart || ''}/${this.root.dataset.vxRangeEnd || ''}`\n    );\n    if (rangeStart || rangeEnd) {\n      this.rangeStart = rangeStart;\n      this.rangeEnd = rangeEnd;\n    } else {\n      const [fallbackStart, fallbackEnd] = parseRangeSelection(this.root.dataset.vxSelected);\n      this.rangeStart = fallbackStart;\n      this.rangeEnd = fallbackEnd;\n    }\n    this.today = new Date();\n    this.todayIso = toIsoDate(this.today);\n    this.monthFormatter = new Intl.DateTimeFormat(this.locale, { month: 'long', year: 'numeric' });\n    this.weekdayFormatter = new Intl.DateTimeFormat(this.locale, { weekday: 'short' });\n    this.weekdaysReady = false;\n    this.normalizeSelection();\n    const start = this.getInitialViewDate() || this.today;\n    this.viewDate = new Date(start.getFullYear(), start.getMonth(), 1);\n    this.parts = this.ensureStructure();\n    this.bind();\n    this.syncDataset();\n    this.render();\n  }\n\n  private getInitialViewDate() {\n    if (this.mode === 'range') {\n      return this.rangeStart || this.rangeEnd;\n    }\n    if (this.mode === 'multi') {\n      const firstIso = [...this.selectedDates].sort()[0];\n      return parseDate(firstIso);\n    }\n    return this.selected;\n  }\n\n  private normalizeSelection() {\n    if (this.mode !== 'single') {\n      this.selected = null;\n    }\n    if (this.mode !== 'multi') {\n      this.selectedDates.clear();\n    }\n    if (this.mode !== 'range') {\n      this.rangeStart = null;\n      this.rangeEnd = null;\n    }\n\n    if (this.mode === 'single' && this.selected && this.isOutOfRange(this.selected)) {\n      this.selected = null;\n    }\n    if (this.mode === 'multi') {\n      this.selectedDates = new Set(\n        [...this.selectedDates].filter((iso) => {\n          const date = parseDate(iso);\n          return date ? !this.isOutOfRange(date) : false;\n        })\n      );\n    }\n    if (this.mode === 'range') {\n      if (this.rangeStart && this.isOutOfRange(this.rangeStart)) {\n        this.rangeStart = null;\n      }\n      if (this.rangeEnd && this.isOutOfRange(this.rangeEnd)) {\n        this.rangeEnd = null;\n      }\n      if (this.rangeStart && this.rangeEnd && this.rangeEnd < this.rangeStart) {\n        const start = this.rangeEnd;\n        this.rangeEnd = this.rangeStart;\n        this.rangeStart = start;\n      }\n    }\n  }\n\n  private ensureStructure(): CalendarParts {\n    this.root.classList.add('vxc-calendar');\n    this.root.classList.add('c-calendar');\n\n    let header = this.root.querySelector<HTMLElement>('.vxc-calendar-header, .c-calendar-header');\n    if (!header) {\n      header = document.createElement('div');\n      header.className = 'vxc-calendar-header';\n      this.root.appendChild(header);\n    } else {\n      header.classList.add('vxc-calendar-header');\n    }\n\n    let prev = header.querySelector<HTMLButtonElement>('[data-vx-cal-prev]');\n    if (!prev) {\n      prev = document.createElement('button');\n      prev.type = 'button';\n      prev.className = 'vxc-calendar-nav';\n      prev.dataset.vxCalPrev = '';\n      prev.textContent = 'Prev';\n      header.appendChild(prev);\n    } else {\n      prev.classList.add('vxc-calendar-nav');\n    }\n\n    let title = header.querySelector<HTMLElement>('.vxc-calendar-title, .c-calendar-title');\n    if (!title) {\n      title = document.createElement('div');\n      title.className = 'vxc-calendar-title';\n      header.appendChild(title);\n    } else {\n      title.classList.add('vxc-calendar-title');\n    }\n\n    let next = header.querySelector<HTMLButtonElement>('[data-vx-cal-next]');\n    if (!next) {\n      next = document.createElement('button');\n      next.type = 'button';\n      next.className = 'vxc-calendar-nav';\n      next.dataset.vxCalNext = '';\n      next.textContent = 'Next';\n      header.appendChild(next);\n    } else {\n      next.classList.add('vxc-calendar-nav');\n    }\n\n    let weekdays = this.root.querySelector<HTMLElement>(\n      '.vxc-calendar-weekdays, .c-calendar-weekdays'\n    );\n    if (!weekdays) {\n      weekdays = document.createElement('div');\n      weekdays.className = 'vxc-calendar-weekdays';\n      this.root.appendChild(weekdays);\n    } else {\n      weekdays.classList.add('vxc-calendar-weekdays');\n    }\n\n    let grid = this.root.querySelector<HTMLElement>('.vxc-calendar-grid, .c-calendar-grid');\n    if (!grid) {\n      grid = document.createElement('div');\n      grid.className = 'vxc-calendar-grid';\n      this.root.appendChild(grid);\n    } else {\n      grid.classList.add('vxc-calendar-grid');\n    }\n\n    return { header, title, prev, next, weekdays, grid };\n  }\n\n  private bind() {\n    this.parts.prev.addEventListener('click', () => {\n      this.viewDate = addMonths(this.viewDate, -1);\n      this.render();\n    });\n\n    this.parts.next.addEventListener('click', () => {\n      this.viewDate = addMonths(this.viewDate, 1);\n      this.render();\n    });\n\n    this.parts.grid.addEventListener('click', (event) => {\n      const target = (event.target as HTMLElement | null)?.closest<HTMLElement>('[data-vx-date]');\n      if (!target || target.hasAttribute('disabled')) {\n        return;\n      }\n      const iso = target.getAttribute('data-vx-date');\n      const date = parseDate(iso);\n      if (!date) {\n        return;\n      }\n      if (this.isOutOfRange(date)) {\n        return;\n      }\n\n      this.applySelection(date, iso || '');\n      if (\n        date.getFullYear() !== this.viewDate.getFullYear() ||\n        date.getMonth() !== this.viewDate.getMonth()\n      ) {\n        this.viewDate = new Date(date.getFullYear(), date.getMonth(), 1);\n      }\n      this.syncDataset();\n      this.render();\n      this.root.dispatchEvent(new CustomEvent('vx:calendar-change', { detail: this.getValue() }));\n    });\n  }\n\n  private applySelection(date: Date, iso: string) {\n    if (this.mode === 'multi') {\n      if (this.selectedDates.has(iso)) {\n        this.selectedDates.delete(iso);\n      } else {\n        this.selectedDates.add(iso);\n      }\n      return;\n    }\n\n    if (this.mode === 'range') {\n      if (!this.rangeStart || (this.rangeStart && this.rangeEnd)) {\n        this.rangeStart = date;\n        this.rangeEnd = null;\n        return;\n      }\n      if (date < this.rangeStart) {\n        this.rangeEnd = this.rangeStart;\n        this.rangeStart = date;\n        return;\n      }\n      this.rangeEnd = date;\n      return;\n    }\n\n    this.selected = date;\n  }\n\n  private syncDataset() {\n    this.root.dataset.vxSelection = this.mode;\n    if (this.mode === 'single') {\n      const iso = this.selected ? toIsoDate(this.selected) : '';\n      this.root.dataset.vxSelected = iso;\n      delete this.root.dataset.vxSelectedDates;\n      delete this.root.dataset.vxRangeStart;\n      delete this.root.dataset.vxRangeEnd;\n      return;\n    }\n\n    if (this.mode === 'multi') {\n      const dates = [...this.selectedDates].sort();\n      const value = dates.join(',');\n      this.root.dataset.vxSelected = value;\n      this.root.dataset.vxSelectedDates = value;\n      delete this.root.dataset.vxRangeStart;\n      delete this.root.dataset.vxRangeEnd;\n      return;\n    }\n\n    const startIso = this.rangeStart ? toIsoDate(this.rangeStart) : '';\n    const endIso = this.rangeEnd ? toIsoDate(this.rangeEnd) : '';\n    this.root.dataset.vxRangeStart = startIso;\n    this.root.dataset.vxRangeEnd = endIso;\n    this.root.dataset.vxSelected = endIso ? `${startIso}/${endIso}` : startIso;\n    delete this.root.dataset.vxSelectedDates;\n  }\n\n  getValue() {\n    if (this.mode === 'multi') {\n      return {\n        mode: this.mode,\n        selectedDates: [...this.selectedDates].sort()\n      };\n    }\n    if (this.mode === 'range') {\n      return {\n        mode: this.mode,\n        rangeStart: this.rangeStart ? toIsoDate(this.rangeStart) : null,\n        rangeEnd: this.rangeEnd ? toIsoDate(this.rangeEnd) : null\n      };\n    }\n    return {\n      mode: this.mode,\n      selected: this.selected ? toIsoDate(this.selected) : null\n    };\n  }\n\n  private isOutOfRange(date: Date) {\n    if (this.minDate && date < this.minDate) {\n      return true;\n    }\n    if (this.maxDate && date > this.maxDate) {\n      return true;\n    }\n    return false;\n  }\n\n  private renderWeekdays() {\n    if (this.weekdaysReady) {\n      return;\n    }\n    const labels = getWeekdayLabels(this.weekdayFormatter, this.weekStart);\n    const fragment = document.createDocumentFragment();\n    labels.forEach((label) => {\n      const cell = document.createElement('div');\n      cell.textContent = label;\n      fragment.appendChild(cell);\n    });\n    this.parts.weekdays.replaceChildren(fragment);\n    this.weekdaysReady = true;\n  }\n\n  private isDateSelected(iso: string) {\n    if (this.mode === 'multi') {\n      return this.selectedDates.has(iso);\n    }\n    if (this.mode === 'range') {\n      return iso === (this.rangeStart ? toIsoDate(this.rangeStart) : null);\n    }\n    return this.selected ? toIsoDate(this.selected) === iso : false;\n  }\n\n  private isDateInRange(date: Date) {\n    if (this.mode !== 'range' || !this.rangeStart || !this.rangeEnd) {\n      return false;\n    }\n    const value = date.getTime();\n    return value > this.rangeStart.getTime() && value < this.rangeEnd.getTime();\n  }\n\n  private isRangeStart(iso: string) {\n    return this.mode === 'range' && this.rangeStart ? toIsoDate(this.rangeStart) === iso : false;\n  }\n\n  private isRangeEnd(iso: string) {\n    return this.mode === 'range' && this.rangeEnd ? toIsoDate(this.rangeEnd) === iso : false;\n  }\n\n  private renderGrid() {\n    const year = this.viewDate.getFullYear();\n    const month = this.viewDate.getMonth();\n    const first = new Date(year, month, 1);\n    const dayOfWeek = first.getDay();\n    const leading = (dayOfWeek - this.weekStart + 7) % 7;\n    const start = new Date(year, month, 1 - leading);\n    const totalCells = 42;\n\n    const fragment = document.createDocumentFragment();\n\n    for (let i = 0; i < totalCells; i += 1) {\n      const date = new Date(start.getFullYear(), start.getMonth(), start.getDate() + i);\n      const isCurrentMonth = date.getMonth() === month;\n      const iso = toIsoDate(date);\n      const isSelected = this.isDateSelected(iso);\n      const isToday = this.todayIso === iso;\n      const disabled = this.isOutOfRange(date);\n      const isInRange = this.isDateInRange(date);\n      const isRangeStart = this.isRangeStart(iso);\n      const isRangeEnd = this.isRangeEnd(iso);\n\n      const cell = document.createElement('button');\n      cell.type = 'button';\n      cell.className = 'vxc-calendar-day c-calendar-day';\n      cell.textContent = `${date.getDate()}`;\n      cell.setAttribute('data-vx-date', iso);\n      cell.setAttribute('aria-label', iso);\n\n      if (!isCurrentMonth) {\n        cell.classList.add('vxs-outside');\n      }\n      if (isToday) {\n        cell.classList.add('vxs-today');\n        cell.setAttribute('aria-current', 'date');\n      }\n      if (isSelected && !disabled) {\n        cell.classList.add('vxs-selected');\n        cell.setAttribute('aria-selected', 'true');\n      }\n      if (isInRange && !disabled) {\n        cell.classList.add('vxs-in-range');\n      }\n      if (isRangeStart && !disabled) {\n        cell.classList.add('vxs-range-start');\n      }\n      if (isRangeEnd && !disabled) {\n        cell.classList.add('vxs-range-end');\n      }\n      if (disabled) {\n        cell.classList.add('vxs-disabled');\n        cell.setAttribute('disabled', 'true');\n      }\n\n      fragment.appendChild(cell);\n    }\n    this.parts.grid.replaceChildren(fragment);\n  }\n\n  private render() {\n    this.parts.title.textContent = this.monthFormatter.format(this.viewDate);\n    this.renderWeekdays();\n    this.renderGrid();\n  }\n\n  static wire() {\n    document.querySelectorAll<HTMLElement>('[data-vx=\"calendar\"]').forEach((calendarEl) => {\n      new Calendar(calendarEl);\n    });\n  }\n}\n\r\n","const clamp = (value: number, min: number, max: number) => Math.min(max, Math.max(min, value));\n\nconst toNumber = (value: string | null | undefined, fallback = 0) => {\n  const parsed = Number(value);\n  return Number.isFinite(parsed) ? parsed : fallback;\n};\n\nexport class ParticleProgress {\n  private root: HTMLElement;\n  private bar: HTMLElement;\n  private layer: HTMLElement;\n\n  constructor(root: HTMLElement) {\n    this.root = root;\n    this.root.classList.add('vxc-progress', 'vxc-progress-particles');\n    this.bar = this.ensureBar();\n    this.layer = this.ensureLayer();\n    this.seedParticles();\n    this.setProgress(this.readInitialProgress());\n    this.bindInputSync();\n  }\n\n  private ensureBar() {\n    let bar = this.root.querySelector<HTMLElement>('.vxc-progress-bar');\n    if (!bar) {\n      bar = document.createElement('div');\n      bar.className = 'vxc-progress-bar';\n      this.root.appendChild(bar);\n    }\n    return bar;\n  }\n\n  private ensureLayer() {\n    let layer = this.root.querySelector<HTMLElement>('.vxc-progress-particle-layer');\n    if (!layer) {\n      layer = document.createElement('div');\n      layer.className = 'vxc-progress-particle-layer';\n      this.root.appendChild(layer);\n    }\n    layer.setAttribute('aria-hidden', 'true');\n    return layer;\n  }\n\n  private readInitialProgress() {\n    const dataValue = toNumber(this.root.dataset.vxProgress, Number.NaN);\n    if (Number.isFinite(dataValue)) {\n      return clamp(dataValue, 0, 100);\n    }\n\n    const styleValue = toNumber(this.bar.style.width.replace('%', ''), 0);\n    return clamp(styleValue, 0, 100);\n  }\n\n  private seedParticles() {\n    const count = clamp(Math.round(toNumber(this.root.dataset.vxParticleCount, 14)), 6, 32);\n    const fragment = document.createDocumentFragment();\n\n    for (let i = 0; i < count; i += 1) {\n      const particle = document.createElement('span');\n      const spreadX = (Math.random() - 0.5) * 42;\n      const spreadY = -4 - Math.random() * 26;\n      const midpointX = spreadX * 0.4;\n      const midpointY = spreadY * 0.42;\n      const scale = 0.72 + Math.random() * 0.66;\n      const delay = (i * 0.075 + Math.random() * 0.55).toFixed(2);\n\n      particle.className = 'vxc-progress-particle';\n      particle.style.setProperty('--vx-px', `${spreadX.toFixed(2)}px`);\n      particle.style.setProperty('--vx-py', `${spreadY.toFixed(2)}px`);\n      particle.style.setProperty('--vx-px-mid', `${midpointX.toFixed(2)}px`);\n      particle.style.setProperty('--vx-py-mid', `${midpointY.toFixed(2)}px`);\n      particle.style.setProperty('--vx-scale', scale.toFixed(2));\n      particle.style.setProperty('--vx-scale-mid', (scale * 0.72).toFixed(2));\n      particle.style.setProperty('--vx-delay', `${delay}s`);\n\n      fragment.appendChild(particle);\n    }\n\n    this.layer.replaceChildren(fragment);\n  }\n\n  private bindInputSync() {\n    const sourceId = this.root.dataset.vxProgressSource;\n    if (!sourceId) {\n      return;\n    }\n    const source = document.getElementById(sourceId) as HTMLInputElement | null;\n    if (!source) {\n      return;\n    }\n    const sync = () => this.setProgress(toNumber(source.value, 0));\n    source.addEventListener('input', sync);\n    source.addEventListener('change', sync);\n    sync();\n  }\n\n  setProgress(value: number) {\n    const clamped = clamp(Math.round(value), 0, 100);\n    this.root.dataset.vxProgress = `${clamped}`;\n    this.root.style.setProperty('--vx-progress', `${clamped}`);\n    this.root.style.setProperty('--vx-progress-intensity', Math.max(0.25, clamped / 100).toFixed(2));\n    this.bar.style.width = `${clamped}%`;\n  }\n\n  static wire() {\n    document.querySelectorAll<HTMLElement>('[data-vx=\"particle-progress\"]').forEach((progressEl) => {\n      new ParticleProgress(progressEl);\n    });\n  }\n}\n","export class ImageReveal {\n  private root: HTMLElement;\n  private image: HTMLImageElement | null;\n  private observer: IntersectionObserver | null;\n  private visible: boolean;\n  private loaded: boolean;\n\n  constructor(root: HTMLElement) {\n    this.root = root;\n    this.image = root.querySelector<HTMLImageElement>('img');\n    this.observer = null;\n    this.visible = false;\n    this.loaded = false;\n\n    if (!this.image) {\n      return;\n    }\n\n    this.root.classList.add('vxc-image-reveal');\n    this.bindLoad();\n    this.bindVisibility();\n  }\n\n  private bindLoad() {\n    if (!this.image) {\n      return;\n    }\n\n    const markLoaded = () => {\n      this.loaded = true;\n      this.root.classList.add('vxs-loaded');\n      this.updateState();\n    };\n\n    if (this.image.complete && this.image.naturalWidth > 0) {\n      markLoaded();\n      return;\n    }\n\n    this.image.addEventListener('load', markLoaded, { once: true });\n    this.image.addEventListener('error', markLoaded, { once: true });\n  }\n\n  private bindVisibility() {\n    if (typeof window === 'undefined' || !('IntersectionObserver' in window)) {\n      this.visible = true;\n      this.root.classList.add('vxs-visible');\n      this.updateState();\n      return;\n    }\n\n    this.observer = new IntersectionObserver(\n      (entries) => {\n        const entry = entries[0];\n        if (!entry?.isIntersecting) {\n          return;\n        }\n        this.visible = true;\n        this.root.classList.add('vxs-visible');\n        this.updateState();\n        this.observer?.disconnect();\n        this.observer = null;\n      },\n      { threshold: 0.2 }\n    );\n\n    this.observer.observe(this.root);\n  }\n\n  private updateState() {\n    this.root.dataset.vxState = this.visible && this.loaded ? 'open' : 'closed';\n  }\n\n  static wire() {\n    document.querySelectorAll<HTMLElement>('[data-vx=\"image-reveal\"]').forEach((imageEl) => {\n      new ImageReveal(imageEl);\n    });\n  }\n}\n","import { Modal } from './modules/modal';\nimport { Drawer } from './modules/drawer';\nimport { Dropdown } from './modules/dropdown';\nimport { Tooltip } from './modules/tooltip';\nimport { Tabs } from './modules/tabs';\nimport { ToastStack } from './modules/toast';\nimport { Accordion } from './modules/accordion';\nimport { Popover } from './modules/popover';\nimport { Navbar } from './modules/navbar';\nimport { Calendar } from './modules/calendar';\nimport { ParticleProgress } from './modules/particle-progress';\nimport { ImageReveal } from './modules/image-reveal';\n\nexport {\n  Modal,\n  Drawer,\n  Dropdown,\n  Tooltip,\n  Tabs,\n  ToastStack,\n  Accordion,\n  Popover,\n  Navbar,\n  Calendar,\n  ParticleProgress,\n  ImageReveal\n};\n\nexport const autoInit = () => {\n  Modal.wire();\n  Drawer.wire();\n  Dropdown.wire();\n  Tooltip.wire();\n  Tabs.wire();\n  ToastStack.wire();\n  Accordion.wire();\n  Popover.wire();\n  Navbar.wire();\n  Calendar.wire();\n  ParticleProgress.wire();\n  ImageReveal.wire();\n};\n\nconst shouldAutoInit = () =>\n  typeof document !== 'undefined' && document.documentElement?.hasAttribute('data-vx-auto');\n\nif (shouldAutoInit()) {\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', () => autoInit());\n  } else {\n    autoInit();\n  }\n}\n"],"names":["toggleClass","el","className","on","setAriaExpanded","expanded","setAriaHidden","hidden","modalAngles","Modal","root","__publicField","configured","index","event","modalEl","modal","id","btn","Drawer","drawerEl","drawer","Dropdown","_a","dropdown","Tooltip","trigger","tipEl","text","show","rect","hide","Tabs","tab","isActive","panel","tabs","first","ToastStack","message","timeout","toast","stackEl","stack","msg","Accordion","panelId","accordion","Popover","popover","Navbar","isOpen","navEl","parseDate","value","match","year","month","day","date","splitDateValues","item","compareDates","a","b","toIsoDate","y","m","d","addMonths","offset","getWeekdayLabels","formatter","weekStart","base","labels","_","parseMode","parseDateList","token","parseRangeSelection","tokens","second","Calendar","rangeStart","rangeEnd","fallbackStart","fallbackEnd","start","firstIso","iso","header","prev","title","next","weekdays","grid","target","startIso","endIso","fragment","label","cell","leading","totalCells","i","isCurrentMonth","isSelected","isToday","disabled","isInRange","isRangeStart","isRangeEnd","calendarEl","clamp","min","max","toNumber","fallback","parsed","ParticleProgress","bar","layer","dataValue","styleValue","count","particle","spreadX","spreadY","midpointX","midpointY","scale","delay","sourceId","source","sync","clamped","progressEl","ImageReveal","markLoaded","entries","entry","imageEl","autoInit","shouldAutoInit"],"mappings":"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"}