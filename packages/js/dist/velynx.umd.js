(function(n,i){typeof exports=="object"&&typeof module<"u"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(n=typeof globalThis<"u"?globalThis:n||self,i(n.Velynx={}))})(this,function(n){"use strict";var I=Object.defineProperty;var W=(n,i,l)=>i in n?I(n,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[i]=l;var r=(n,i,l)=>W(n,typeof i!="symbol"?i+"":i,l);const i=(o,t,e)=>{e?o.classList.add(t):o.classList.remove(t)},l=(o,t)=>{o&&"setAttribute"in o&&o.setAttribute("aria-expanded",t?"true":"false")},u=(o,t)=>{o&&"setAttribute"in o&&o.setAttribute("aria-hidden",t?"true":"false")};class m{constructor(t){r(this,"root");this.root=t,this.root.setAttribute("role","dialog"),this.root.setAttribute("aria-modal","true"),u(this.root,!0)}open(){i(this.root,"vxs-open",!0),u(this.root,!1)}close(){i(this.root,"vxs-open",!1),u(this.root,!0)}static wire(){document.querySelectorAll('[data-vx="modal"]').forEach(t=>{const e=new m(t),s=t.id;s&&(document.querySelectorAll(`[data-vx-open="${s}"]`).forEach(a=>{a.addEventListener("click",()=>{e.open(),l(a,!0)})}),document.querySelectorAll(`[data-vx-close="${s}"]`).forEach(a=>{a.addEventListener("click",()=>{e.close(),l(a,!1)})}))})}}class f{constructor(t){r(this,"root");this.root=t,u(this.root,!0)}open(){i(this.root,"vxs-open",!0),u(this.root,!1)}close(){i(this.root,"vxs-open",!1),u(this.root,!0)}static wire(){document.querySelectorAll('[data-vx="drawer"]').forEach(t=>{const e=new f(t),s=t.id;s&&(document.querySelectorAll(`[data-vx-open="${s}"]`).forEach(a=>{a.addEventListener("click",()=>{e.open(),l(a,!0)})}),document.querySelectorAll(`[data-vx-close="${s}"]`).forEach(a=>{a.addEventListener("click",()=>{e.close(),l(a,!1)})}))})}}class g{constructor(t){r(this,"root");r(this,"toggle");r(this,"menu");var e;this.root=t,this.toggle=t.querySelector("[data-vx-toggle]"),this.menu=t.querySelector("[data-vx-menu]"),(e=this.toggle)==null||e.setAttribute("aria-haspopup","menu"),l(this.toggle,!1)}open(){!this.menu||!this.toggle||(i(this.menu,"vxs-open",!0),l(this.toggle,!0))}close(){!this.menu||!this.toggle||(i(this.menu,"vxs-open",!1),l(this.toggle,!1))}static wire(){document.querySelectorAll('[data-vx="dropdown"]').forEach(t=>{var s;const e=new g(t);(s=e.toggle)==null||s.addEventListener("click",()=>{var a;(a=e.menu)!=null&&a.classList.contains("vxs-open")?e.close():e.open()}),document.addEventListener("click",a=>{t.contains(a.target)||e.close()})})}}class C{static wire(){document.querySelectorAll("[data-vx-tooltip]").forEach(e=>{let s=null;const a=e.getAttribute("data-vx-tooltip")||"",c=()=>{if(!a)return;s=document.createElement("div"),s.className="c-tooltip m-fade-1",s.textContent=a,document.body.appendChild(s);const v=e.getBoundingClientRect();s.style.position="fixed",s.style.top=`${v.bottom+8}px`,s.style.left=`${v.left}px`},d=()=>{s&&(s.remove(),s=null)};e.addEventListener("mouseenter",c),e.addEventListener("focus",c),e.addEventListener("mouseleave",d),e.addEventListener("blur",d)})}}class p{constructor(t){r(this,"root");this.root=t}activate(t){this.root.querySelectorAll("[data-vx-tab]").forEach(e=>{const s=e.getAttribute("data-vx-tab")===t;i(e,"vxs-active",s),l(e,s)}),this.root.querySelectorAll("[data-vx-panel]").forEach(e=>{const s=e.getAttribute("data-vx-panel")===t;i(e,"vxs-hidden",!s),u(e,!s)})}static wire(){document.querySelectorAll('[data-vx="tabs"]').forEach(t=>{const e=new p(t),s=t.querySelector("[data-vx-tab]");s&&e.activate(s.getAttribute("data-vx-tab")||""),t.querySelectorAll("[data-vx-tab]").forEach(a=>{a.setAttribute("role","tab"),a.addEventListener("click",()=>{const c=a.getAttribute("data-vx-tab")||"";e.activate(c)})}),t.querySelectorAll("[data-vx-panel]").forEach(a=>{a.setAttribute("role","tabpanel")})})}}class x{constructor(t){r(this,"root");this.root=t}show(t,e=3200){const s=document.createElement("div");s.className="c-toast m-fade-1",s.textContent=t,this.root.appendChild(s),window.setTimeout(()=>{s.remove()},e)}static wire(){document.querySelectorAll('[data-vx="toast-stack"]').forEach(t=>{const e=new x(t),s=t.id;s&&document.querySelectorAll(`[data-vx-toast="${s}"]`).forEach(a=>{a.addEventListener("click",()=>{const c=a.getAttribute("data-vx-toast-msg")||"Signal sent.";e.show(c)})})})}}class w{constructor(t){r(this,"root");this.root=t}toggle(t){this.root.querySelectorAll("[data-vx-panel]").forEach(e=>{const s=e.getAttribute("data-vx-panel")===t;i(e,"vxs-hidden",!s),u(e,!s)}),this.root.querySelectorAll("[data-vx-trigger]").forEach(e=>{const s=e.getAttribute("data-vx-trigger")===t;l(e,s)})}static wire(){document.querySelectorAll('[data-vx="accordion"]').forEach(t=>{const e=new w(t);t.querySelectorAll("[data-vx-panel]").forEach(s=>{i(s,"vxs-hidden",!0),u(s,!0)}),t.querySelectorAll("[data-vx-trigger]").forEach(s=>{s.addEventListener("click",()=>{const a=s.getAttribute("data-vx-trigger")||"";e.toggle(a)})})})}}class y{constructor(t){r(this,"trigger");r(this,"panel");this.trigger=t;const e=t.getAttribute("data-vx-popover")||"";this.panel=e?document.getElementById(e):null,this.trigger.setAttribute("aria-haspopup","dialog")}open(){this.panel&&i(this.panel,"vxs-hidden",!1)}close(){this.panel&&i(this.panel,"vxs-hidden",!0)}static wire(){document.querySelectorAll("[data-vx-popover]").forEach(t=>{const e=new y(t);e.close(),t.addEventListener("click",()=>{var s;(s=e.panel)!=null&&s.classList.contains("vxs-hidden")?e.open():e.close()}),document.addEventListener("click",s=>{var a;!t.contains(s.target)&&!((a=e.panel)!=null&&a.contains(s.target))&&e.close()})})}}class b{constructor(t){r(this,"root");r(this,"toggle");r(this,"menu");if(this.root=t,this.toggle=this.root.querySelector("[data-vx-toggle]"),this.menu=this.root.querySelector("[data-vx-menu]"),!this.toggle||!this.menu)return;this.menu.id&&this.toggle.setAttribute("aria-controls",this.menu.id);const e=this.menu.classList.contains("vxs-open");l(this.toggle,e),u(this.menu,!e),this.toggle.addEventListener("click",()=>{var a;!((a=this.menu)!=null&&a.classList.contains("vxs-open"))?this.open():this.close()}),this.root.addEventListener("keydown",s=>{s.key==="Escape"&&this.close()}),document.addEventListener("click",s=>{!this.menu||!this.menu.classList.contains("vxs-open")||this.root.contains(s.target)||this.close()})}open(){this.menu&&(i(this.menu,"vxs-open",!0),l(this.toggle,!0),u(this.menu,!1))}close(){this.menu&&(i(this.menu,"vxs-open",!1),l(this.toggle,!1),u(this.menu,!0))}static wire(){document.querySelectorAll('[data-vx="navbar"]').forEach(t=>{new b(t)})}}const A=o=>{if(!o)return null;const t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(o);if(!t)return null;const e=Number(t[1]),s=Number(t[2])-1,a=Number(t[3]),c=new Date(e,s,a);return Number.isNaN(c.getTime())?null:c},D=o=>{const t=o.getFullYear(),e=`${o.getMonth()+1}`.padStart(2,"0"),s=`${o.getDate()}`.padStart(2,"0");return`${t}-${e}-${s}`},N=(o,t)=>new Date(o.getFullYear(),o.getMonth()+t,1),T=(o,t)=>new Intl.DateTimeFormat(t,{month:"long",year:"numeric"}).format(o),$=(o,t)=>{const e=new Intl.DateTimeFormat(o,{weekday:"short"}),s=new Date(2020,5,7),a=Array.from({length:7},(c,d)=>{const v=new Date(s);return v.setDate(s.getDate()+d),e.format(v)});return a.slice(t).concat(a.slice(0,t))};class E{constructor(t){r(this,"root");r(this,"parts");r(this,"locale");r(this,"weekStart");r(this,"minDate");r(this,"maxDate");r(this,"selected");r(this,"viewDate");r(this,"today");this.root=t,this.locale=this.root.dataset.vxLocale||"en-US",this.weekStart=Number(this.root.dataset.vxWeekStart||0),(Number.isNaN(this.weekStart)||this.weekStart<0||this.weekStart>6)&&(this.weekStart=0),this.minDate=A(this.root.dataset.vxMin),this.maxDate=A(this.root.dataset.vxMax),this.selected=A(this.root.dataset.vxSelected),this.today=new Date;const e=this.selected||this.today;this.viewDate=new Date(e.getFullYear(),e.getMonth(),1),this.parts=this.ensureStructure(),this.bind(),this.render()}ensureStructure(){this.root.classList.add("c-calendar");let t=this.root.querySelector(".c-calendar-header");t||(t=document.createElement("div"),t.className="c-calendar-header",this.root.appendChild(t));let e=t.querySelector("[data-vx-cal-prev]");e||(e=document.createElement("button"),e.type="button",e.className="c-calendar-nav",e.dataset.vxCalPrev="",e.textContent="Prev",t.appendChild(e));let s=t.querySelector(".c-calendar-title");s||(s=document.createElement("div"),s.className="c-calendar-title",t.appendChild(s));let a=t.querySelector("[data-vx-cal-next]");a||(a=document.createElement("button"),a.type="button",a.className="c-calendar-nav",a.dataset.vxCalNext="",a.textContent="Next",t.appendChild(a));let c=this.root.querySelector(".c-calendar-weekdays");c||(c=document.createElement("div"),c.className="c-calendar-weekdays",this.root.appendChild(c));let d=this.root.querySelector(".c-calendar-grid");return d||(d=document.createElement("div"),d.className="c-calendar-grid",this.root.appendChild(d)),{header:t,title:s,prev:e,next:a,weekdays:c,grid:d}}bind(){this.parts.prev.addEventListener("click",()=>{this.viewDate=N(this.viewDate,-1),this.render()}),this.parts.next.addEventListener("click",()=>{this.viewDate=N(this.viewDate,1),this.render()}),this.parts.grid.addEventListener("click",t=>{var c;const e=(c=t.target)==null?void 0:c.closest("[data-vx-date]");if(!e||e.hasAttribute("disabled"))return;const s=e.getAttribute("data-vx-date"),a=A(s);a&&(this.selected=a,(a.getFullYear()!==this.viewDate.getFullYear()||a.getMonth()!==this.viewDate.getMonth())&&(this.viewDate=new Date(a.getFullYear(),a.getMonth(),1)),this.root.dataset.vxSelected=s||"",this.render())})}isOutOfRange(t){return!!(this.minDate&&t<this.minDate||this.maxDate&&t>this.maxDate)}renderWeekdays(){const t=$(this.locale,this.weekStart);this.parts.weekdays.innerHTML="",t.forEach(e=>{const s=document.createElement("div");s.textContent=e,this.parts.weekdays.appendChild(s)})}renderGrid(){const t=this.viewDate.getFullYear(),e=this.viewDate.getMonth(),c=(new Date(t,e,1).getDay()-this.weekStart+7)%7,d=new Date(t,e,1-c),v=42;this.parts.grid.innerHTML="";for(let k=0;k<v;k+=1){const S=new Date(d.getFullYear(),d.getMonth(),d.getDate()+k),O=S.getMonth()===e,q=D(S),F=this.selected?D(this.selected)===q:!1,Y=D(this.today)===q,M=this.isOutOfRange(S),h=document.createElement("button");h.type="button",h.className="c-calendar-day",h.textContent=`${S.getDate()}`,h.setAttribute("data-vx-date",q),O||h.classList.add("vxs-outside"),Y&&h.classList.add("vxs-today"),F&&!M&&(h.classList.add("vxs-selected"),h.setAttribute("aria-selected","true")),M&&(h.classList.add("vxs-disabled"),h.setAttribute("disabled","true")),this.parts.grid.appendChild(h)}}render(){this.parts.title.textContent=T(this.viewDate,this.locale),this.renderWeekdays(),this.renderGrid()}static wire(){document.querySelectorAll('[data-vx="calendar"]').forEach(t=>{new E(t)})}}const L=()=>{m.wire(),f.wire(),g.wire(),C.wire(),p.wire(),x.wire(),w.wire(),y.wire(),b.wire(),E.wire()};(()=>{var o;return typeof document<"u"&&((o=document.documentElement)==null?void 0:o.hasAttribute("data-vx-auto"))})()&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>L()):L()),n.Accordion=w,n.Calendar=E,n.Drawer=f,n.Dropdown=g,n.Modal=m,n.Navbar=b,n.Popover=y,n.Tabs=p,n.ToastStack=x,n.Tooltip=C,n.autoInit=L,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=velynx.umd.js.map
